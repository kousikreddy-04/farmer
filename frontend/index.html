<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Kisan - AI Crop Intelligence</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ionicons@5.5.2/dist/css/ionicons.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Background -->
    <div class="bg-overlay"></div>

    <!-- App Container -->
    <div id="app">

        <!-- LOGIN SCREEN -->
        <div id="login-screen" class="screen active">
            <div class="auth-container">
                <div class="auth-header">
                    <div class="logo-icon">üå±</div>
                    <h1>Welcome Back!</h1>
                    <p>Login to Smart Kisan</p>
                </div>
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="login-phone" placeholder="10-digit number" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="login-password" placeholder="Enter password" required>
                    </div>
                    <div id="login-error" class="error-message"></div>
                    <button type="submit" class="btn-primary">
                        <span class="btn-text">LOGIN</span>
                        <span class="btn-loader"></span>
                    </button>
                    <a href="#" class="link-text" onclick="showScreen('register')">New User? Register here</a>
                </form>
            </div>
        </div>

        <!-- REGISTER SCREEN -->
        <div id="register-screen" class="screen">
            <div class="auth-container">
                <div class="auth-header">
                    <div class="logo-icon">üå±</div>
                    <h1>Join Smart Kisan</h1>
                    <p>Create your account</p>
                </div>
                <form id="register-form" class="auth-form">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="register-name" placeholder="Your name" required>
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="register-phone" placeholder="10-digit number" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="register-password" placeholder="Create password" required>
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" id="register-location" placeholder="Your location">
                    </div>
                    <div id="register-error" class="error-message"></div>
                    <button type="submit" class="btn-primary">
                        <span class="btn-text">REGISTER</span>
                        <span class="btn-loader"></span>
                    </button>
                    <a href="#" class="link-text" onclick="showScreen('login')">Already have account? Login</a>
                </form>
            </div>
        </div>

        <!-- HOME SCREEN -->
        <div id="home-screen" class="screen">
            <div class="top-bar">
                <div class="user-greeting">
                    <span class="greeting-text" id="greeting">Welcome back,</span>
                    <h2 id="user-name">Farmer</h2>
                </div>
                <div class="profile-circle" onclick="showScreen('profile')">
                    <img id="user-avatar" src="https://cdn-icons-png.flaticon.com/512/4140/4140048.png" alt="Profile">
                    <div class="online-dot"></div>
                </div>
            </div>

            <div class="content-scroll">
                <!-- Weather Card -->
                <div class="weather-card" id="weather-card">
                    <div class="weather-icon">‚òÄÔ∏è</div>
                    <div class="weather-info">
                        <h3 id="weather-temp">--¬∞C</h3>
                        <p id="weather-condition">Loading weather...</p>
                    </div>
                </div>

                <!-- Daily Tip -->
                <div class="tip-card">
                    <div class="tip-icon">üåø</div>
                    <div class="tip-content">
                        <span class="tip-label">DAILY TIP</span>
                        <p class="tip-text">Rotate crops to maintain soil nitrogen naturally!</p>
                    </div>
                </div>

                <!-- Main Action -->
                <div class="main-action-card" onclick="showScreen('input')">
                    <div class="action-icon">‚ú®</div>
                    <div class="action-content">
                        <h3>Start New Analysis</h3>
                        <p>Analyze soil & weather for results</p>
                    </div>
                    <span class="action-arrow">‚Ä∫</span>
                </div>

                <!-- Recent History -->
                <div class="section-header">
                    <h3>RECENT HISTORY</h3>
                    <a href="#" onclick="showScreen('history')">View All</a>
                </div>
                <div id="recent-history">
                    <div class="empty-state">
                        <p>No recent history found.</p>
                    </div>
                </div>
            </div>

            <div class="bottom-nav">
                <div class="nav-item active" onclick="showScreen('home')">
                    <ion-icon name="home"></ion-icon>
                    <span>Home</span>
                </div>
                <div class="nav-item" onclick="showScreen('history')">
                    <ion-icon name="time"></ion-icon>
                    <span>History</span>
                </div>
                <div class="nav-fab" onclick="showScreen('input')">
                    <ion-icon name="scan"></ion-icon>
                </div>
                <div class="nav-item" onclick="showScreen('chat')">
                    <ion-icon name="chatbubbles"></ion-icon>
                    <span>Chat</span>
                </div>
                <div class="nav-item" onclick="showScreen('profile')">
                    <ion-icon name="person"></ion-icon>
                    <span>Profile</span>
                </div>
            </div>
        </div>

        <!-- INPUT SCREEN -->
        <div id="input-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn" onclick="showScreen('home')">
                    <ion-icon name="arrow-back"></ion-icon>
                </button>
                <h2>New Analysis</h2>
            </div>

            <div class="content-scroll">
                <div class="input-card">
                    <h3>üìç Location</h3>
                    <div class="location-info" id="location-info">Fetching location...</div>
                </div>

                <div class="input-card">
                    <h3>üì∏ Soil Photo</h3>
                    <div class="image-upload">
                        <input type="file" id="soil-image" accept="image/*" onchange="handleImagePreview(this)">
                        <label for="soil-image" class="upload-label">
                            <ion-icon name="camera"></ion-icon>
                            <span>Capture or Upload</span>
                        </label>
                        <div id="image-preview" class="image-preview"></div>
                    </div>
                </div>

                <div class="input-card">
                    <h3>üåæ Manual Parameters (Optional)</h3>
                    <div class="slider-group">
                        <label>Nitrogen (N): <span id="n-val">50</span></label>
                        <input type="range" min="0" max="140" value="50" id="n-slider"
                            oninput="updateSlider('n', this.value)">
                    </div>
                    <div class="slider-group">
                        <label>Phosphorus (P): <span id="p-val">40</span></label>
                        <input type="range" min="0" max="140" value="40" id="p-slider"
                            oninput="updateSlider('p', this.value)">
                    </div>
                    <div class="slider-group">
                        <label>Potassium (K): <span id="k-val">40</span></label>
                        <input type="range" min="0" max="140" value="40" id="k-slider"
                            oninput="updateSlider('k', this.value)">
                    </div>
                    <div class="slider-group">
                        <label>pH Level: <span id="ph-val">7.0</span></label>
                        <input type="range" min="3" max="10" step="0.1" value="7.0" id="ph-slider"
                            oninput="updateSlider('ph', this.value)">
                    </div>
                </div>

                <button class="btn-primary btn-large" onclick="submitAnalysis()">
                    <span class="btn-text">Get Recommendation</span>
                    <span class="btn-loader"></span>
                </button>
            </div>
        </div>

        <!-- RESULT SCREEN -->
        <div id="result-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn" onclick="showScreen('home')">
                    <ion-icon name="arrow-back"></ion-icon>
                </button>
                <h2>Analysis Report</h2>
            </div>

            <div class="content-scroll">
                <div class="result-header">
                    <div class="result-badge">‚ú® AI RECOMMENDATION</div>
                    <h1 id="result-crop">Rice</h1>
                    <div class="confidence-bar">
                        <span>Confidence:</span>
                        <div class="confidence-fill" id="confidence-fill"></div>
                        <span id="confidence-text">0%</span>
                    </div>
                </div>

                <div class="result-card">
                    <h3>üå± Soil Assessment</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="label">Type</span>
                            <span class="value" id="soil-type">--</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Fertility</span>
                            <span class="value" id="soil-fertility">--</span>
                        </div>
                    </div>
                </div>

                <div class="result-card">
                    <h3>üå§Ô∏è Weather Summary</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="label">Temperature</span>
                            <span class="value" id="result-temp">--¬∞C</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Humidity</span>
                            <span class="value" id="result-humidity">--%</span>
                        </div>
                    </div>
                </div>

                <div class="result-card">
                    <h3>üí° Why this crop?</h3>
                    <div id="explanation-text" class="explanation-text"></div>
                </div>

                <div class="result-card">
                    <h3>‚ö†Ô∏è Risks & Precautions</h3>
                    <div id="risks-list" class="risks-list"></div>
                </div>

                <button class="btn-secondary btn-large" onclick="showScreen('input')">
                    <ion-icon name="scan"></ion-icon> New Scan
                </button>
            </div>
        </div>

        <!-- HISTORY SCREEN -->
        <div id="history-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn" onclick="showScreen('home')">
                    <ion-icon name="arrow-back"></ion-icon>
                </button>
                <h2>History</h2>
            </div>

            <div class="content-scroll" id="history-list">
                <div class="empty-state">
                    <ion-icon name="time-outline" style="font-size: 64px; color: #ccc;"></ion-icon>
                    <p>No analysis history yet</p>
                </div>
            </div>
        </div>

        <!-- CHAT SCREEN -->
        <div id="chat-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn" onclick="showScreen('home')">
                    <ion-icon name="arrow-back"></ion-icon>
                </button>
                <h2>AI Assistant</h2>
            </div>

            <div class="chat-messages" id="chat-messages">
                <div class="chat-bubble bot">
                    <p>Hello! I'm your AI farming assistant. Ask me anything about crops, soil, or farming practices!
                    </p>
                </div>
            </div>

            <div class="chat-input-container">
                <input type="text" id="chat-input" placeholder="Type your question..."
                    onkeypress="handleChatEnter(event)">
                <button class="send-btn" onclick="sendMessage()">
                    <ion-icon name="send"></ion-icon>
                </button>
            </div>
        </div>

        <!-- PROFILE SCREEN -->
        <div id="profile-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn" onclick="showScreen('home')">
                    <ion-icon name="arrow-back"></ion-icon>
                </button>
                <h2>Profile</h2>
            </div>

            <div class="content-scroll">
                <div class="profile-header-card">
                    <img id="profile-avatar" src="https://cdn-icons-png.flaticon.com/512/4140/4140048.png"
                        alt="Profile">
                    <h2 id="profile-name">Farmer</h2>
                    <p id="profile-phone">--</p>
                </div>

                <div class="settings-group">
                    <h3>Settings</h3>
                    <div class="setting-item">
                        <span>Language</span>
                        <select id="language-select" onchange="changeLanguage(this.value)">
                            <option value="en">English</option>
                            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                            <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                            <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                        </select>
                    </div>
                </div>

                <button class="btn-danger btn-large" onclick="logout()">
                    <ion-icon name="log-out"></ion-icon> Logout
                </button>
            </div>
        </div>

    </div>

    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="script.js"></script>
</body>

</html>